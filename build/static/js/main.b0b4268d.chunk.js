(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,t,n){e.exports=n(71)},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(16),u=n.n(c),o=n(12),s=n(13),i=n(21),l=n(18),d=n(22),p=n(20),b=n(4),f=n.n(b),y=n(14),m=n(19),v=n(38),E=n(36),h=n.n(E),j=n(10),O=n(5),w=n(28);var C=n(40),g=["currencies"],k=new(function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Object(o.a)(this,e),this.name=t,this.version=r}return Object(s.a)(e,[{key:"connect",value:function(){var e=Object(y.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.a)(this.name,this.version,{upgrade:function(e){g.forEach(function(t){e.createObjectStore(t,{keyPath:"id",autoIncrement:!0})})}});case 2:this.db=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"add",value:function(e,t){return this.db.add(e,t)}},{key:"delete",value:function(e,t){return this.db.delete(e,t)}},{key:"getAll",value:function(e){return this.db.getAll(e)}}]),e}())("currency-db"),x=Object(j.c)({id:null,symbol:"",value:0}),S=Object(j.c)({entities:new j.b({}),loading:!1,error:null}),R="ADD_CURRENCY_REQUEST",_="ADD_CURRENCY_SUCCESS",U="DELETE_CURRENCY_REQUEST",N="DELETE_CURRENCY_SUCCESS",T="GET_ALL_CURRENCIES_REQUEST",A="GET_CURRENCIES_SUCCESS",D="GET_RATES_SUCCESS",I="ERROR";var B=f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.getAll("currencies");case 3:return t=e.sent,e.next=6,Object(O.c)({type:A,payload:t});case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(O.c)({type:I,payload:e.t0});case 12:case"end":return e.stop()}},e,null,[[0,8]])}),G=f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.payload.symbol).length&&"RUB"!==n){e.next=3;break}return e.abrupt("return");case 3:return n=n.toUpperCase(),e.prev=4,e.next=7,k.add("currencies",{id:n,symbol:n});case 7:return e.next=9,Object(O.c)({type:_,payload:{id:n,symbol:n}});case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(4),e.next=15,Object(O.c)({type:I,payload:e.t0});case 15:case"end":return e.stop()}},e,null,[[4,11]])}),Q=f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.payload.id,e.next=4,k.delete("currencies",n);case 4:return e.next=6,Object(O.c)({type:N,payload:n});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,null,[[0,8]])}),L=f.a.mark(function e(t){var n,r,a,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.payload,!Array.isArray(n)){e.next=6;break}if(n.length){e.next=4;break}return e.abrupt("return");case 4:e.next=7;break;case 6:n=[n];case 7:return r=n.map(function(e){return e.id}),e.prev=8,e.next=11,Object(O.b)(h.a.get,"".concat("https://openexchangerates.org/api/","latest.json?app_id=").concat("0faf8af7d8c2487c96b30e275f292df5","&symbols=").concat("RUB",",").concat(r.join(",")));case 11:return a=e.sent,c=a.data.rates,e.next=15,Object(O.c)({type:D,payload:r.reduce(function(e,t){return Object.assign(e,Object(m.a)({},t,c[t]?Math.round(100*c.RUB/c[t])/100:0))},{})});case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(8),e.next=21,Object(O.c)({type:I,payload:e.t0});case 21:case"end":return e.stop()}},e,null,[[8,17]])}),Y=f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)([Object(O.d)(R,G),Object(O.d)(U,Q),Object(O.d)(T,B),Object(O.d)(A,L),Object(O.d)(_,L),Object(O.d)("GET_RATES_REQUEST",L)]);case 2:case"end":return e.stop()}},e)}),J=Object(w.a)(function(e){return e.currency},function(e){return e.entities}),H=Object(w.a)(J,function(e){return e.valueSeq().toArray().map(function(e){return e.toJS()})}),M=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={addingCurrency:!1,symbol:""},n.addCurrency=function(){(0,n.props.addCurrency)(n.state.symbol),n.setState({symbol:"",addingCurrency:!1})},n.toggle=function(){n.setState({addingCurrency:!n.state.addingCurrency})},n.keyDownHandler=function(e){13===e.keyCode&&n.addCurrency(e.target.value)},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(f.a.mark(function e(){var t=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.connect();case 2:this.props.getCurrencies(),setInterval(function(){return t.props.getRates(t.props.currencies)},6e4);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.deleteCurrency,r=t.getRates,c=t.currencies,u=this.state,o=u.addingCurrency,s=u.symbol;return a.a.createElement("div",{className:"container"},a.a.createElement("button",{className:"button button--circle update-button",onClick:function(){return r(c)}},a.a.createElement("i",{className:"material-icons"},"update")),a.a.createElement("div",{className:"df aic jcc mb-1"},!o&&a.a.createElement("button",{className:"button",onClick:this.toggle},"Add currency"),o&&a.a.createElement("div",{className:"df aic jcc"},a.a.createElement("input",{type:"text",value:s,className:"input",placeholder:"Symbol",id:"input",onChange:function(t){return e.setState({symbol:t.target.value})},onKeyDown:this.keyDownHandler}),a.a.createElement("button",{className:"button",onClick:this.addCurrency},"\u041e\u041a"))),a.a.createElement("div",null,a.a.createElement("div",{className:"df aic jcsa table__header"},a.a.createElement("span",null,"Symbol"),a.a.createElement("span",null,"Value"),a.a.createElement("span",null,"Delete"))),a.a.createElement("div",{className:"table__wrapper"},a.a.createElement("table",{className:"table"},a.a.createElement("tbody",null,c.map(function(e){return a.a.createElement("tr",{key:e.id},a.a.createElement("td",null,e.symbol),a.a.createElement("td",null,e.value),a.a.createElement("td",null,a.a.createElement("i",{onClick:function(){return n(e.id)},className:"material-icons"},"delete")))})))))}}]),t}(r.Component),W=Object(p.b)(function(e){return{currencies:H(e)}},{getCurrencies:function(){return{type:T}},addCurrency:function(e){return{type:R,payload:{symbol:e}}},deleteCurrency:function(e){return{type:U,payload:{id:e}}},getRates:function(e){return{type:"GET_RATES_REQUEST",payload:e}}})(M),q=n(9),K=Object(q.c)(Object(m.a)({},"currency",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new S,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case R:case T:return e.set("loading",!0).set("error",null);case _:return e.set("loading",!1).set("error",null).setIn(["entities",r.id],new x(r));case N:return e.set("loading",!1).set("error",null).deleteIn(["entities",r]);case A:return e.set("loading",!1).set("entities",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.a;return e?new j.b(Object(j.d)(e.reduce(function(e,n){return e[n.id]=new t(n),e},{}))):new j.b({})}(r,x));case D:return Object.entries(r).forEach(function(t){var n=Object(v.a)(t,2),r=n[0],a=n[1];return e=0===a?e.deleteIn(["entities",r]):e.updateIn(["entities",r],function(e){return e.set("value",a)})}),e;case I:return e.set("loading",!1).set("error",r);default:return e.set("error",null)}})),P=n(37),V=n.n(P),$=n(39),z=f.a.mark(F);function F(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)([Y()]);case 2:case"end":return e.stop()}},z)}var X=Object($.a)(),Z=Object(q.a)(X,V.a),ee=Object(q.e)(K,Z);window.store=ee,X.run(F);var te=ee,ne=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(p.a,{store:te},a.a.createElement(W,null))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(70);u.a.render(a.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,1,2]]]);
//# sourceMappingURL=main.b0b4268d.chunk.js.map